{"is_source_file": true, "format": "Python", "description": "This file defines the RecipeService class which provides CRUD operations, filtering, and rating functionalities for recipes within a recipe management backend. It interacts with an in-memory repository and handles validation, filtering, and access control logic for recipes.", "external_files": ["src/core/errors", "src/core/pagination", "src/models/schemas", "src/storage/memory_repo"], "external_methods": ["AppError.not_found", "AppError.forbidden", "AppError.bad_request", "MemoryRepo.list_all", "MemoryRepo.create", "MemoryRepo.get", "MemoryRepo.update", "MemoryRepo.delete", "MemoryRepo.upsert_rating", "RecipePublic.model_validate"], "published": ["recipe_service"], "classes": [{"name": "RecipeService", "description": "Provides methods for managing recipes, including listing, creating, retrieving, updating, deleting, and rating recipes. Implements filtering logic for recipe listings."}], "methods": [{"name": "Page[RecipePublic] list_recipes( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "description": "Returns a paginated list of recipes, optionally filtered by tags, cuisine, and maximum cooking time.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic create_recipe(self, owner_id: str, data: RecipeCreate)", "description": "Creates a new recipe with the specified data and owner ID.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic get_recipe(self, recipe_id: str)", "description": "Retrieves a recipe by its ID, raising an error if not found.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "description": "Updates an existing recipe if the user is the owner.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "None delete_recipe(self, recipe_id: str, user_id: str)", "description": "Deletes a recipe if the user is the owner.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic rate_recipe(self, recipe_id: str, user_id: str, rating: int)", "description": "Allows a user to rate a recipe, enforcing rating bounds.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "List[dict] _apply_filters( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "description": "Internal method to filter recipe items based on tags, cuisine, and maximum time.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "RecipeService", "scopeKind": "class", "description": "unavailable"}, {"name": "\"RecipeService\" recipe_service()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["MemoryRepo.list_all", "MemoryRepo.create", "MemoryRepo.get", "MemoryRepo.update", "MemoryRepo.delete", "MemoryRepo.upsert_rating", "AppError.not_found", "AppError.forbidden", "AppError.bad_request", "RecipePublic.model_validate"], "search-terms": ["RecipeService", "rate_recipe", "create_recipe", "list_recipes", "memory_recipe_repo", "CRUD"], "state": 2, "file_id": 22, "knowledge_revision": 57, "git_revision": "9b3b14fc4035d76893bb5ea015ad3ad3ffa69624", "revision_history": [{"49": "f929afc4e3a7012f58b4037d217836857c95acbf"}, {"56": "76296ab28fe7de64eb5df4f209af1b579e4ed110"}, {"57": "9b3b14fc4035d76893bb5ea015ad3ad3ffa69624"}], "ctags": [{"_type": "tag", "name": "RecipeService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^class RecipeService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "_apply_filters", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def _apply_filters($/", "language": "Python", "typeref": "typename:List[dict]", "kind": "member", "signature": "( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def create_recipe(self, owner_id: str, data: RecipeCreate) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, owner_id: str, data: RecipeCreate)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "delete_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def delete_recipe(self, recipe_id: str, user_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, recipe_id: str, user_id: str)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def get_recipe(self, recipe_id: str) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "list_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def list_recipes($/", "language": "Python", "typeref": "typename:Page[RecipePublic]", "kind": "member", "signature": "( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "rate_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def rate_recipe(self, recipe_id: str, user_id: str, rating: int) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str, user_id: str, rating: int)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "recipe_service", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^def recipe_service() -> \"RecipeService\":$/", "language": "Python", "typeref": "typename:\"RecipeService\"", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "update_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "scope": "RecipeService", "scopeKind": "class"}], "hash": "0f5d18e7311b101b609e554d03ee9763", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/services/recipe_service.py"}