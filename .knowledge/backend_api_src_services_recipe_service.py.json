{"is_source_file": true, "format": "Python", "description": "This file implements the RecipeService class, providing CRUD operations, filtering, and rating functionalities for recipes within the application. It interacts with an in-memory repository and defines interfaces for listing, creating, retrieving, updating, deleting, and rating recipes.", "external_files": ["src.core.errors", "src.core.pagination", "src.models.schemas", "src.storage.memory_repo"], "external_methods": ["AppError.not_found", "AppError.forbidden", "AppError.bad_request", "RecipePublic.model_validate"], "published": ["RecipeService"], "classes": [{"name": "RecipeService", "description": "Provides CRUD, filtering, and rating operations for recipes, acting as the main service layer for recipe management."}], "methods": [{"name": "Page[RecipePublic] list_recipes( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "description": "Returns a paginated list of recipes, optionally filtered by tags, cuisine, and maximum preparation time.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic create_recipe(self, owner_id: str, data: RecipeCreate)", "description": "Creates a new recipe with the provided data and owner ID, returning the created recipe.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic get_recipe(self, recipe_id: str)", "description": "Retrieves a recipe by its ID, raising an error if not found.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "description": "Updates an existing recipe if the user is the owner, identified by recipe ID and user ID.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "None delete_recipe(self, recipe_id: str, user_id: str)", "description": "Deletes a recipe if the user is the owner, identified by recipe ID and user ID.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "RecipePublic rate_recipe(self, recipe_id: str, user_id: str, rating: int)", "description": "Adds or updates a user's rating for a recipe, enforcing ratings between 1 and 5.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "List[dict] _apply_filters( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "description": "Filters a list of recipes based on tags, cuisine, and maximum time given.", "scope": "RecipeService", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "RecipeService", "scopeKind": "class", "description": "unavailable"}], "calls": ["self.repo.list_all()", "self.repo.create()", "self.repo.get()", "self.repo.update()", "self.repo.delete()", "self.repo.upsert_rating()", "RecipePublic.model_validate()", "Page[RecipePublic](...)", "AppError.not_found()", "AppError.forbidden()", "AppError.bad_request()"], "search-terms": ["RecipeService", "list_recipes", "create_recipe", "get_recipe", "update_recipe", "delete_recipe", "rate_recipe", "apply_filters", "memory_recipe_repo"], "state": 2, "file_id": 22, "knowledge_revision": 49, "git_revision": "f929afc4e3a7012f58b4037d217836857c95acbf", "ctags": [{"_type": "tag", "name": "RecipeService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^class RecipeService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "_apply_filters", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def _apply_filters($/", "language": "Python", "typeref": "typename:List[dict]", "kind": "member", "signature": "( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def create_recipe(self, owner_id: str, data: RecipeCreate) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, owner_id: str, data: RecipeCreate)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "delete_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def delete_recipe(self, recipe_id: str, user_id: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, recipe_id: str, user_id: str)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def get_recipe(self, recipe_id: str) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "list_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def list_recipes($/", "language": "Python", "typeref": "typename:Page[RecipePublic]", "kind": "member", "signature": "( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "rate_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def rate_recipe(self, recipe_id: str, user_id: str, rating: int) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str, user_id: str, rating: int)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "update_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate) -> RecipePublic:$/", "language": "Python", "typeref": "typename:RecipePublic", "kind": "member", "signature": "(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "scope": "RecipeService", "scopeKind": "class"}], "hash": "4e409ad452ea9cd274ccf13627ad2e91", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/services/recipe_service.py", "revision_history": [{"49": "f929afc4e3a7012f58b4037d217836857c95acbf"}]}