{"is_source_file": true, "format": "Python", "description": "This file defines the RecipeService class which provides CRUD operations, filtering, and rating logic for recipes. It acts as a service layer interfacing with an in-memory repository for recipe data, and exposes methods for listing, creating, retrieving, updating, deleting, and rating recipes.", "external_files": ["src/core/errors", "src/core/pagination", "src/models/schemas", "src/storage/memory_repo"], "external_methods": ["AppError.not_found", "AppError.forbidden", "AppError.bad_request", "RecipePublic.model_validate"], "published": ["recipe_service"], "classes": [{"name": "RecipeService", "description": "A service class encapsulating business logic for managing recipes, including CRUD operations, filtering, and rating."}], "methods": [{"name": "Page[RecipePublic] list_recipes( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "description": "Retrieves a paginated list of recipes, applying optional filters such as tags, cuisine, and maximum preparation time.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "RecipePublic create_recipe(self, owner_id: str, data: RecipeCreate)", "description": "Creates a new recipe with provided data and owner ID.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "RecipePublic get_recipe(self, recipe_id: str)", "description": "Fetches a specific recipe by its ID, raising an error if not found.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "RecipePublic update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "description": "Updates an existing recipe if the owner ID matches, raising errors otherwise.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "None delete_recipe(self, recipe_id: str, user_id: str)", "description": "Deletes a recipe if it exists and the user is the owner.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "RecipePublic rate_recipe(self, recipe_id: str, user_id: str, rating: int)", "description": "Adds or updates a rating for a recipe, validating the rating value.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "List[dict] _apply_filters( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "description": "Internal method for filtering recipes based on tags, cuisine, and max time.", "scope": "recipe_service", "scopeKind": "function"}, {"name": "None __init__(self)", "scope": "RecipeService", "scopeKind": "class", "description": "unavailable"}, {"name": "\"RecipeService\" recipe_service()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["memory_recipe_repo", "AppError.not_found", "AppError.forbidden", "AppError.bad_request", "RecipePublic.model_validate", "Page", "list", "create", "get", "update", "delete", "upsert_rating"], "search-terms": ["RecipeService", "CRUD", "in-memory repository", "filter recipes", "rate recipes", "recipe management", "recipe filtering"], "state": 2, "file_id": 22, "knowledge_revision": 56, "git_revision": "76296ab28fe7de64eb5df4f209af1b579e4ed110", "revision_history": [{"49": "f929afc4e3a7012f58b4037d217836857c95acbf"}, {"56": "76296ab28fe7de64eb5df4f209af1b579e4ed110"}], "ctags": [{"_type": "tag", "name": "RecipeService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^class RecipeService:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RecipeService", "scopeKind": "class"}, {"_type": "tag", "name": "_apply_filters", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def _apply_filters($/", "file": true, "language": "Python", "typeref": "typename:List[dict]", "kind": "function", "signature": "( self, items: List[dict], tags: List[str] | None, cuisine: str | None, time_max: int | None, )", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "create_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def create_recipe(self, owner_id: str, data: RecipeCreate) -> RecipePublic:$/", "file": true, "language": "Python", "typeref": "typename:RecipePublic", "kind": "function", "signature": "(self, owner_id: str, data: RecipeCreate)", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "delete_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def delete_recipe(self, recipe_id: str, user_id: str) -> None:$/", "file": true, "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(self, recipe_id: str, user_id: str)", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "get_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def get_recipe(self, recipe_id: str) -> RecipePublic:$/", "file": true, "language": "Python", "typeref": "typename:RecipePublic", "kind": "function", "signature": "(self, recipe_id: str)", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "list_recipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def list_recipes($/", "file": true, "language": "Python", "typeref": "typename:Page[RecipePublic]", "kind": "function", "signature": "( self, page: int, page_size: int, tags: List[str] | None, cuisine: str | None, time_max: int | None )", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "rate_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def rate_recipe(self, recipe_id: str, user_id: str, rating: int) -> RecipePublic:$/", "file": true, "language": "Python", "typeref": "typename:RecipePublic", "kind": "function", "signature": "(self, recipe_id: str, user_id: str, rating: int)", "scope": "recipe_service", "scopeKind": "function"}, {"_type": "tag", "name": "recipe_service", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^def recipe_service() -> \"RecipeService\":$/", "language": "Python", "typeref": "typename:\"RecipeService\"", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "update_recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/services/recipe_service.py", "pattern": "/^    def update_recipe(self, recipe_id: str, user_id: str, data: RecipeUpdate) -> RecipePublic:$/", "file": true, "language": "Python", "typeref": "typename:RecipePublic", "kind": "function", "signature": "(self, recipe_id: str, user_id: str, data: RecipeUpdate)", "scope": "recipe_service", "scopeKind": "function"}], "hash": "a3478e2c2d1443a7f6bb639558b64703", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/services/recipe_service.py"}