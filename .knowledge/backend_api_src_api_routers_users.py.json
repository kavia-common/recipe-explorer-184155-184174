{"is_source_file": true, "format": "Python", "description": "This file defines API endpoints for user registration, login, and current user retrieval using FastAPI. It includes route handlers, dependency injections, and documentation comments.", "external_files": ["src/core/errors.py", "src/core/security.py", "src/models/schemas.py", "src/services/user_service.py"], "external_methods": ["src.core.security.get_current_user", "src.core.security.TokenService.issue_token", "src.models.schemas.TokenResponse", "src.models.schemas.UserCreate", "src.models.schemas.UserPublic", "src.services.user_service.user_service", "src.services.user_service.UserService.register_user", "src.services.user_service.UserService.authenticate"], "published": ["register_user", "login", "get_me"], "classes": [], "methods": [{"name": "UserPublic register_user( payload: UserCreate, users: Annotated[UserService, Depends(user_service)], )", "description": "Handles user registration, creates a new user if email and username are unique.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse login( form_data: Annotated[OAuth2PasswordRequestForm, Depends()], users: Annotated[UserService, Depends(user_service)], tokens: Annotated[TokenService, Depends(token_service)], )", "description": "Authenticates user based on username and password, returns a bearer token.", "scope": "", "scopeKind": ""}, {"name": "UserPublic get_me(current_user=Depends(get_current_user))", "description": "Retrieves current authenticated user's public information.", "scope": "", "scopeKind": ""}], "calls": ["users.register_user", "tokens.issue_token", "UserPublic.model_validate", "raise AppError.unauthorized"], "search-terms": ["FastAPI user routes", "user registration endpoint", "OAuth2 login", "current user retrieval", "tokens issuance", "user service dependency"], "state": 2, "file_id": 6, "knowledge_revision": 50, "git_revision": "f929afc4e3a7012f58b4037d217836857c95acbf", "revision_history": [{"14": ""}, {"50": "f929afc4e3a7012f58b4037d217836857c95acbf"}], "ctags": [{"_type": "tag", "name": "get_me", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/api/routers/users.py", "pattern": "/^def get_me(current_user=Depends(get_current_user)) -> UserPublic:$/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "(current_user=Depends(get_current_user))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/api/routers/users.py", "pattern": "/^def login($/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "( form_data: Annotated[OAuth2PasswordRequestForm, Depends()], users: Annotated[UserService, Depends(user_service)], tokens: Annotated[TokenService, Depends(token_service)], )"}, {"_type": "tag", "name": "register_user", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/api/routers/users.py", "pattern": "/^def register_user($/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "( payload: UserCreate, users: Annotated[UserService, Depends(user_service)], )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184155-184174/backend_api/src/api/routers/users.py", "pattern": "/^router = APIRouter(prefix=\"\\/users\", tags=[\"users\", \"auth\"])$/", "language": "Python", "kind": "variable"}], "hash": "da2ceb247c657ad866bcf0ca9613d20d", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/api/routers/users.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/users\", tags=[\"users\", \"auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}